---
import { getLangFromUrl, useTranslations } from "../../utils/i18n";
import Icon from "../ui/Icon.jsx";
import MagneticButton from "../ui/MagneticButton.astro";
import StatsCounter from "../ui/StatsCounter.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const localContent = {
  en: {
    bootcampTitle: "Applied Full Stack Training",
    bootcampSubtitle: "ED Técnica • 8+ Months • 1000+ Hours",
    uniTitle: "Engineering in Computer Science",
    uniSubtitle: "UPTCMS University • 2/4 Years • In Progress",
    techLabels: {
      usage: "Usage",
      context: "Context"
    },
    bootcampContext: "ED Técnica (Intensive)",
    uniContext: "University (Academic)",
    productionContext: "Production / Deploy",
    techsLearnedStr: "Technologies Learned",
    archivesTitle: "Mission Archives: ED Técnica",
    archivesSubtitle: "Training Log & Performance Data",
    pressure: "Operational Context: Extreme Pressure, Teamwork, Rapid Delivery.",
    projects: "Key Assignments",
    grades: "Performance Record"
  },
  es: {
    bootcampTitle: "Formación Full Stack Aplicada",
    bootcampSubtitle: "ED Técnica • 8+ Meses • 1000+ Horas",
    uniTitle: "Ingeniería en Informática",
    uniSubtitle: "Universidad UPTCMS • 2/4 Años • En Curso",
    techLabels: {
      usage: "Uso",
      context: "Contexto"
    },
    bootcampContext: "ED Técnica (Intensivo)",
    uniContext: "Universidad (Académico)",
    productionContext: "Producción / Despliegue",
    techsLearnedStr: "Tecnologías Aprendidas",
    archivesTitle: "Archivos de Misión: ED Técnica",
    archivesSubtitle: "Registro de Entrenamiento y Rendimiento",
    pressure: "Contexto Operativo: Presión Extrema, Trabajo en Equipo, Entregas Rápidas.",
    projects: "Asignaciones Clave",
    grades: "Registro de Notas"
  }
};

const lc = localContent[lang] || localContent['en'];

// Data Structure: "Visual Storytelling"
// Group A: Applied Full Stack (The Workshop / Production)
const bootcampStack = [
  { name: "JavaScript", icon: "javascript", color: "text-yellow-400 group-hover:text-yellow-300", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(250,204,21,0.6)]", usage: "Daily Driver • Logic & Systems", context: "8 Months Intensive" },
  { name: "React", icon: "react", color: "text-cyan-400 group-hover:text-cyan-300", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(34,211,238,0.6)]", usage: "Component Architecture", context: "Production Projects" },
  { name: "Astro", icon: "astro", color: "text-orange-500 group-hover:text-amber-400", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(249,115,22,0.6)]", usage: "Content Focused Framework", context: "Modern Static Sites" },
  { name: "Next.js", icon: "next", color: "text-gray-200 group-hover:text-white", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(255,255,255,0.5)]", usage: "Full Stack Framework", context: "SSR / Static Gen" },
  { name: "Tailwind", icon: "tailwind", color: "text-sky-400 group-hover:text-sky-300", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(56,189,248,0.6)]", usage: "Rapid UI Development", context: "Design Systems" },
  { name: "Node.js", icon: "node", color: "text-emerald-500 group-hover:text-emerald-400", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(16,185,129,0.6)]", usage: "Backend Services", context: "API Runtime" },
  { name: "Supabase", icon: "supabase", color: "text-emerald-400 group-hover:text-green-300", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(52,211,153,0.6)]", usage: "Backend-as-a-Service", context: "Realtime DB" },
  { name: "MongoDB", icon: "mongodb", color: "text-green-500 group-hover:text-green-400", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(34,197,94,0.6)]", usage: "NoSQL Data Handling", context: "Flex Schema" },
  { name: "Git", icon: "git", color: "text-orange-600 group-hover:text-red-500", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(234,88,12,0.6)]", usage: "Version Control", context: "Team Flow" },
  { name: "GitHub", icon: "github", color: "text-gray-300 group-hover:text-white", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]", usage: "Collaboration Platform", context: "PRs / Actions" },
  { name: "Vercel", icon: "vercel", color: "text-gray-300 group-hover:text-white", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]", usage: "CI/CD & Hosting", context: "Global Deploy" },
  { name: "Render", icon: "server", color: "text-cyan-300 group-hover:text-cyan-200", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(103,232,249,0.6)]", usage: "Web Service Hosting", context: "Live Apps" },
];

// Group B: Academic Formation (The Lab / Theory)
const uniStack = [
  { name: "Linux", icon: "linux", color: "text-yellow-400 group-hover:text-yellow-200", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(253,224,71,0.6)]", usage: "OS Fundamentals", context: "Terminal Mastery" },
  { name: "C++", icon: "cpp", color: "text-blue-600 group-hover:text-blue-500", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(37,99,235,0.6)]", usage: "Memory Management", context: "Algorithms" },
  { name: "Python", icon: "python", color: "text-yellow-300 group-hover:text-yellow-200", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(253,224,71,0.6)]", usage: "Data Processing", context: "Scripting" },
  { name: "PHP", icon: "php", color: "text-indigo-400 group-hover:text-indigo-300", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(129,140,248,0.6)]", usage: "Backend Fundamentals", context: "Legacy Systems" },
  { name: "Docker", icon: "docker", color: "text-sky-500 group-hover:text-sky-400", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(14,165,233,0.6)]", usage: "Container Basics", context: "Environment" },
  { name: "SQL DBs", icon: "database", color: "text-amber-500 group-hover:text-amber-400", shadow: "group-hover:drop-shadow-[0_0_30px_rgba(245,158,11,0.6)]", usage: "Relational Theory", context: "Normalization" },
];

// Bootcamp Archives Data
const bootcampProjects = [
  "Veterinary Clinic Reservation", "MVC Server Architecture", "Twitter Simulator (LocalStorage)", 
  "E-Commerce Cart", "Flight Booking System", "Book Search Engine", 
  "Car Search Engine", "Pizza Developer", "Admin Panel + Restaurant MVC"
];

const bootcampGrades = [
  { subject: "Logic & Algorithms", score: "18" },
  { subject: "HTML & CSS", score: "17" },
  { subject: "JavaScript", score: "20" },
  { subject: "JS Advanced", score: "20" },
  { subject: "DB & Node.js", score: "20" },
  { subject: "Backend Dev", score: "19" },
  { subject: "Backend Dev II", score: "20" },
  { subject: "Final Grade", score: "19" }
];
---

<section 
  id="about" 
  class="relative py-32 md:py-48 overflow-hidden bg-[#050505] text-white selection:bg-purple-500/30"
>
  <!-- Cinematic Background: Subtle & Deep -->
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-[#1a1a1a] via-black to-black pointer-events-none"></div>
  <div class="absolute inset-0 bg-noise opacity-[0.04] pointer-events-none mix-blend-overlay"></div>
  <div class="absolute inset-0 pointer-events-none spotlight-bg opacity-30 transition-opacity duration-1000"></div>

  <div class="relative z-10 mx-auto max-w-7xl px-6 lg:px-8">
    
    <!-- HEADER -->
    <div class="grid lg:grid-cols-2 gap-16 items-start mb-32">
      <div class="space-y-10">
        <div class="space-y-6 fade-up">
          <div class="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm">
             <div class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></div>
             <span class="text-xs font-mono text-gray-300 tracking-wider uppercase">{t("about.title")}</span>
          </div>
          
          <h2 class="text-5xl md:text-7xl font-display font-bold leading-[0.9] tracking-tight text-white">
            Gabriel <br />
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-white to-blue-400">González.</span>
          </h2>
        </div>

        <div class="space-y-6 text-lg leading-relaxed text-gray-400 font-light max-w-xl fade-up delay-100">
          <p class="text-2xl text-gray-200 font-medium font-display">
            {t("about.p1")}
          </p>
          <p class="text-base md:text-lg">{t("about.p2")}</p>
        </div>

        <div class="flex flex-wrap gap-4 pt-4 fade-up delay-200">
           <MagneticButton href="#contact" class="px-8 py-4 bg-white text-black rounded-full font-bold text-sm tracking-wide hover:bg-gray-200 transition-colors" aria-label={t("about.ctaTalk")}>
             {t("about.ctaTalk")}
           </MagneticButton>
           <MagneticButton href="/cv.pdf" download class="px-8 py-4 rounded-full border border-white/20 hover:bg-white/10 text-white transition-colors backdrop-blur-sm text-sm tracking-wide" aria-label={t("about.ctaDownload")}>
             {t("about.ctaDownload")}
           </MagneticButton>
        </div>
      </div>

      <div class="relative lg:-mt-12 space-y-8 fade-in-right revealed lg:block">
        <div class="relative aspect-[4/3] rounded-[2rem] overflow-hidden border border-white/10 shadow-2xl group hover:shadow-[0_20px_50px_rgba(168,85,247,0.4)] transition-all duration-500">
          <!-- Main Header Video -->
          <video 
             autoplay 
             loop 
             muted 
             playsinline 
             preload="none"
             class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700 ease-out lazy-video"
             aria-label="Developer coding background"
          >
             <source data-src="https://cdn.pixabay.com/video/2025/04/07/270448_large.mp4" type="video/mp4" />
          </video>
          
          <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60"></div>
          
          <!-- Coordinates Overlay -->
          <div class="absolute bottom-6 left-6 font-mono text-xs text-green-400 bg-black/60 px-3 py-1 rounded-full backdrop-blur-md border border-white/10 shadow-lg flex items-center gap-2">
             <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
             SYS.LOC: {t("about.location")}
          </div>
        </div>
      </div>
    </div>

    <!-- NARRATIVE TECH STACK -->
    <div class="border-t border-white/10 pt-24 fade-up delay-200 relative">
      <div class="mb-24 text-center">
        <h3 class="text-4xl md:text-5xl font-display font-bold text-white mb-6">
           {t("about.stackTitle")}
        </h3>
        <p class="text-gray-400 max-w-2xl mx-auto text-lg font-light leading-relaxed">
           {t("about.toolkitDesc")}
        </p>
      </div>

      <!-- Timeline Spine -->
      <div class="hidden xl:block absolute left-1/2 top-48 bottom-0 w-px bg-gradient-to-b from-purple-500 via-white/20 to-blue-500 -translate-x-1/2"></div>

      <div class="grid xl:grid-cols-2 gap-16 lg:gap-32 relative z-10">
        
        <!-- APPLIED TRAINING -->
        <div class="space-y-12">
          <div class="flex flex-col items-center xl:items-end text-center xl:text-right gap-4 group">
            <div class="inline-flex items-center gap-3 px-5 py-2.5 rounded-2xl bg-purple-500/10 border border-purple-500/20 text-purple-400 shadow-[0_0_20px_rgba(168,85,247,0.2)]">
               <Icon name="code" size={24} />
               <span class="font-bold tracking-wide text-sm uppercase">{lc.bootcampTitle}</span>
            </div>
            <h3 class="text-4xl font-bold text-white leading-tight">
               8+ Months <br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">Intensive Training</span>
            </h3>
            <div class="flex items-center gap-3 bg-white/10 px-4 py-2 rounded-lg border border-white/20">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTVMAvhCOkb_T4zE6mPoxvNZaz5kBjZS6cntA&s" class="w-8 h-8 rounded-full" alt="ED Tecnica Logo">
                <p class="text-white text-sm font-bold">ED Técnica</p>
                <a href="https://www.instagram.com/ed.tecnica/" target="_blank" class="text-xs text-purple-300 hover:text-white transition-colors underline" aria-label="Visit ED Técnica Instagram">Visit</a>
            </div>
          </div>
          
          <div class="flex flex-wrap justify-center xl:justify-end gap-5">
            {bootcampStack.map((tech, i) => (
              <div class="group relative" style={`animation-delay: ${i * 30}ms`}>
                <div class="relative z-10 flex items-center justify-center w-24 h-24 rounded-2xl bg-[#0F0F0F] border border-white/10 group-hover:border-purple-500/50 transition-all duration-200 hover:scale-110 cursor-help shadow-lg group-hover:shadow-[0_0_30px_rgba(168,85,247,0.4)]">
                    <div class={`transition-all duration-200 opacity-100 ${tech.color} ${tech.shadow}`}>
                        <Icon name={tech.icon} size={48} />
                    </div>
                </div>
                <!-- Responsive Tooltip -->
                <div class="fixed bottom-4 left-4 right-4 md:absolute md:bottom-full md:left-1/2 md:-translate-x-1/2 md:w-[280px] md:mx-0 bg-[#080808]/95 backdrop-blur-xl border border-purple-500/30 rounded-xl p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-[0_20px_40px_rgba(0,0,0,0.9)] z-[100] pointer-events-none mb-0 md:mb-4 translate-y-2 group-hover:translate-y-0">
                   <div class="flex justify-between items-center border-b border-white/10 pb-2 mb-2">
                      <span class="font-bold text-white text-base">{tech.name}</span>
                      <span class="text-[10px] text-purple-400 font-bold tracking-wider border border-purple-500/30 px-1.5 py-0.5 rounded uppercase">Applied</span>
                   </div>
                   <div class="space-y-1.5">
                       <p class="text-xs text-gray-300 leading-snug"><span class="text-gray-500 uppercase text-[10px] tracking-widest mr-2">Context</span>{tech.context}</p>
                       <p class="text-xs text-gray-300 leading-snug"><span class="text-gray-500 uppercase text-[10px] tracking-widest mr-2">Usage</span>{tech.usage}</p>
                   </div>
                   <div class="absolute top-full left-1/2 -translate-x-1/2 -mt-2 w-4 h-4 bg-[#080808] border-r border-b border-white/10 rotate-45"></div>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- ACADEMIC FOUNDATION -->
        <div class="space-y-12">
          <div class="flex flex-col items-center xl:items-start text-center xl:text-left gap-4 group">
            <div class="inline-flex items-center gap-3 px-5 py-2.5 rounded-2xl bg-blue-500/10 border border-blue-500/20 text-blue-400 shadow-[0_0_20px_rgba(59,130,246,0.2)]">
               <Icon name="briefcase" size={24} />
               <span class="font-bold tracking-wide text-sm uppercase">{lc.uniTitle}</span>
            </div>
            <h3 class="text-4xl font-bold text-white leading-tight">
               Engineering <br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400">Foundation</span>
            </h3>
            <div class="flex items-center gap-3 bg-white/5 px-4 py-2 rounded-lg border border-white/5">
                <Icon name="school" size={20} className="text-blue-400" />
                <p class="text-gray-300 text-sm font-medium">UPTCMS</p>
                <a href="https://www.instagram.com/uptecms_sg/" target="_blank" class="text-xs text-blue-400 hover:text-white transition-colors underline">Visit</a>
            </div>
          </div>

          <div class="flex flex-wrap justify-center xl:justify-start gap-5">
            {uniStack.map((tech, i) => (
              <div class="group relative" style={`animation-delay: ${i * 30}ms`}>
                <div class="relative z-10 flex items-center justify-center w-24 h-24 rounded-full bg-[#0F0F0F] border border-white/10 group-hover:border-blue-500/50 transition-all duration-200 hover:scale-110 cursor-help shadow-lg group-hover:shadow-[0_0_30px_rgba(59,130,246,0.4)]">
                    <div class={`transition-all duration-200 opacity-100 ${tech.color} ${tech.shadow}`}>
                        <Icon name={tech.icon} size={48} />
                    </div>
                </div>
                <!-- Tooltip -->
                <div class="fixed bottom-4 left-4 right-4 md:absolute md:bottom-full md:left-1/2 md:-translate-x-1/2 md:w-[280px] md:mx-0 bg-[#080808]/95 backdrop-blur-xl border border-blue-500/30 rounded-xl p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-[0_20px_40px_rgba(0,0,0,0.9)] z-[100] pointer-events-none mb-0 md:mb-4 translate-y-2 group-hover:translate-y-0">
                   <div class="flex justify-between items-center border-b border-white/10 pb-2 mb-2">
                      <span class="font-bold text-white text-base">{tech.name}</span>
                      <span class="text-[10px] text-blue-400 font-bold tracking-wider border border-blue-500/30 px-1.5 py-0.5 rounded uppercase">Academy</span>
                   </div>
                    <div class="space-y-1.5">
                       <p class="text-xs text-gray-300 leading-snug"><span class="text-gray-500 uppercase text-[10px] tracking-widest mr-2">Context</span>{tech.context}</p>
                       <p class="text-xs text-gray-300 leading-snug"><span class="text-gray-500 uppercase text-[10px] tracking-widest mr-2">Usage</span>{tech.usage}</p>
                   </div>
                   <div class="absolute top-full left-1/2 -translate-x-1/2 -mt-2 w-4 h-4 bg-[#080808] border-r border-b border-white/10 rotate-45"></div>
                </div>
              </div>
            ))}
          </div>
        </div>

      </div>
    </div>

    <!-- BOOTCAMP ARCHIVES: THE MISSION REPORT -->
    <div class="mt-40 relative rounded-3xl overflow-hidden border border-white/10 bg-black">
        <!-- Matrix Background Video -->
        <video 
           autoplay 
           loop 
           muted 
           playsinline 
           preload="none"
           class="absolute inset-0 w-full h-full object-cover opacity-50 pointer-events-none lazy-video"
        >
           <source data-src="https://cdn.pixabay.com/video/2022/03/09/110273-688187522_large.mp4" type="video/mp4" />
        </video>
        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"></div>
        
        <div class="relative z-10 p-8 md:p-16">
            <div class="text-center mb-16">
                <div class="inline-flex items-center gap-2 mb-4 border border-green-500/30 bg-green-900/10 px-4 py-1.5 rounded-full">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    <span class="text-xs font-mono text-green-400 uppercase tracking-widest">Archive Access Granted</span>
                </div>
                <h3 class="text-4xl md:text-5xl font-display font-bold text-white mb-4">{lc.archivesTitle}</h3>
                <p class="text-gray-400 max-w-2xl mx-auto">{lc.pressure}</p>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-16">
                <!-- Project List -->
                <div class="bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8 hover:bg-white/10 transition-colors">
                    <h4 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                        <Icon name="briefcase" size={24} className="text-purple-400" /> 
                        {lc.projects}
                    </h4>
                    <ul class="space-y-4 font-mono text-sm text-gray-300">
                        {bootcampProjects.map(project => (
                            <li class="flex items-center justify-between border-b border-white/5 pb-2 last:border-0 last:pb-0">
                                <span>{project}</span>
                                <div class="flex text-yellow-400 text-xs gap-0.5">
                                    ⭐⭐⭐⭐⭐
                                </div>
                            </li>
                        ))}
                    </ul>
                </div>

                <!-- Grade Report -->
                <div class="bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8 hover:bg-white/10 transition-colors">
                     <h4 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                        <Icon name="award" size={24} className="text-green-400" /> 
                        {lc.grades}
                    </h4>
                    <div class="grid grid-cols-2 gap-4">
                        {bootcampGrades.map(grade => (
                            <div class="bg-black/60 rounded-lg p-3 border border-white/10 flex justify-between items-center group hover:border-green-500/50 transition-colors">
                                <span class="text-xs text-gray-300 group-hover:text-white transition-colors">{grade.subject}</span>
                                <span class="text-lg font-bold text-green-400 font-mono">{grade.score}/20</span>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ORIGINS -->
    <div class="mt-32 pt-24 border-t border-white/5 grid lg:grid-cols-2 gap-16 items-center fade-up delay-200">
        <div class="relative order-2 lg:order-1">
           <div class="relative aspect-video rounded-[2rem] overflow-hidden border border-white/10 shadow-2xl group hover:shadow-[0_20px_50px_rgba(255,255,255,0.1)] transition-all duration-500">
              <img src="https://images.unsplash.com/photo-1605379399642-870262d3d051?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZ3JhbWFjaW9ufGVufDB8fDB8fHww" alt="Origins" class="object-cover w-full h-full transform group-hover:scale-105 transition-transform duration-700 ease-out" loading="lazy" decoding="async" />
              <div class="absolute inset-0 bg-gradient-to-tr from-black via-black/50 to-transparent"></div>
              <div class="absolute bottom-8 left-8 max-w-sm">
                 <p class="text-white text-xl font-display font-medium leading-tight">"{t("about.originsSubtitle")}"</p>
              </div>
           </div>
        </div>
        
        <div class="order-1 lg:order-2 space-y-8 text-center lg:text-left">
           <h3 class="text-4xl md:text-5xl font-display font-bold text-white">{t("about.originsTitle")}</h3>
           <p class="text-gray-400 leading-relaxed font-light text-lg max-w-xl mx-auto lg:mx-0">{t("about.p3")}</p>
            <div class="flex items-center justify-center lg:justify-start gap-4 text-sm font-mono text-gray-400">
               <span class="px-3 py-1 rounded bg-black border border-white/20 font-bold">2020</span>
               <div class="w-12 h-px bg-white/10"></div>
               <span class="px-3 py-1 rounded bg-black border border-white/20 font-bold">{new Date().getFullYear()}</span>
            </div>
        </div>
    </div>
  </div>
</section>

<script>
  function initLazyVideos() {
    const lazyVideos = document.querySelectorAll('.lazy-video');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const video = entry.target as HTMLVideoElement;
          const sources = video.querySelectorAll('source');
          
          sources.forEach(source => {
            if (source.dataset.src) {
              source.src = source.dataset.src;
            }
          });
          
          video.load();
          video.play().catch(() => {});
          observer.unobserve(video);
        }
      });
    }, { threshold: 0 });

    lazyVideos.forEach(video => observer.observe(video));
  }

  initLazyVideos();
  document.addEventListener('astro:page-load', initLazyVideos);
</script>
